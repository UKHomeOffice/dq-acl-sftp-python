FROM centos:centos7

ARG ACL_RDS_HOST
ARG ACL_RDS_DATABASE
ARG ACL_RDS_USERNAME
ARG ACL_RDS_PASSWORD
ARG ACL_RDS_TABLE

ENV RDS_HOST=$ACL_RDS_HOST
ENV RDS_DATABASE=$ACL_RDS_DATABASE
ENV RDS_USERNAME=$ACL_RDS_USERNAME
ENV PGPASSWORD=$ACL_RDS_PASSWORD
ENV RDS_TABLE=$ACL_RDS_TABLE

RUN yum install postgresql-server -y

CMD psql -h $RDS_HOST -p 5432 -d $RDS_DATABASE -U $RDS_USERNAME -c "CREATE TABLE $RDS_TABLE(filename VARCHAR(50) UNIQUE NOT NULL)"
